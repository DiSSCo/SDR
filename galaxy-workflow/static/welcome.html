<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="style/base.css" type="text/css" />
		<link rel="stylesheet" href="style/base.css" type="text/css" />
    </head>

    <body class="m-0">
        <div class="py-4">
            <div class="container">
                <h2>Welcome to the <strong>Specimen Data Refinery</strong>, part of SYNTHESIS+</h2>
                <form>
			        Upload 
			        <br/>
			        <input type="file" id="fileinput"/>
				</form>
				<div id="upload_results"></div>
				<script>
				    function readSingleFile(evt) {
						console.log("event triggered");
						var f = evt.target.files[0]; 
						if (f) {
							console.log("file found");
							var r = new FileReader();
                            r.onload = function(e) { 
								console.log("file loaded");
								var contents = e.target.result;
								console.log(contents);
								document.write("File Uploaded! <br />" + "name: " + f.name + "<br />" + "type: " + f.type + "<br />" + "size: " + f.size + " bytes <br />");
							
								var lines = contents.split("\n"), output = [];
								for (var i=0; i<lines.length; i++) {
								    output.push("<tr><td>" + lines[i].split(",").join("</td><td>") + "</td></tr>");
								}
								output = "<table>" + output.join("") + "</table>";
								console.log(output);
						    }
						} 
						r.readAsText(f);
						else { 
						    alert("Failed to load file");
					    }
				    }
			 	    document.getElementById('fileinput').addEventListener('change', readSingleFile);
					console.log("script loaded");
				</script>
				
				
            </div>
        </div>
    </body>
</html>