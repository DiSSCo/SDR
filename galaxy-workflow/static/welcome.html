<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="style/base.css" type="text/css" />
		<link rel="stylesheet" href="style/base.css" type="text/css" />
    </head>

    <body class="m-0">
        <div class="py-4">
            <div class="container">
                <h2>Welcome to the <strong>Specimen Data Refinery</strong>, part of SYNTHESIS+</h2>
                <form>
			        Upload 
			        <br/>
			        <input type="file" id="fileinput"/>
				</form>
				<div id="upload_results1"></div>
				<div id="upload_results2"></div>
				<script>
				    function readSingleFile(evt) {
						var f = evt.target.files[0]; 
						if (f) {
							var success_text = "";
							var r = new FileReader();
                            r.onload = function(e) { 
								var contents = e.target.result;
								success_text = "File Uploaded! <br />" + "name: " + f.name + "<br />" + "type: " + f.type + "<br />" + "size: " + f.size + " bytes <br />";
								var lines = contents.split("\n"), output = [];
								for (var i=0; i<lines.length; i++) {
								    output.push("<tr><td>" + lines[i].split(",").join("</td><td>") + "</td></tr>");
								}
								output = "<table>" + output.join("") + "</table>";

						    }
							r.readAsText(f);
							document.getElementById('upload_results1').innerHTML(success_text);
							document.getElementById('upload_results2').innerHTML(output);
						} 
						else { 
						    alert("Failed to load file");
					    }
				    }
			 	    document.getElementById('fileinput').addEventListener('change', readSingleFile);
					
				</script>			
            </div>
        </div>
    </body>
</html>