<tool id="sdr_barcode" name="Barcode reader" version="0.0.1">
    <description>for each open digital specimen</description>
    <requirements>
        <!-- <requirement type="package" version="0.1.18">json</requirement> -->
    </requirements>

    <code file="opends_utils.py"/>

    <!-- <macros>
        <import>opends_macros.xml</import>
    <macros>   -->

    <macros>
    <xml name="param" token_name="" token_property="">
        <param name="opends_@NAME@" type="hidden" value="@PROPERTY@" />
    </xml>
    </macros>

    <command><![CDATA[
        python '$__tool_directory__/barcode.py' '$opends'
    ]]></command>    

    <inputs>
        <param name="opends" type="data" format="json" label="Open Digital specimen object" />
        <expand macro="param" name="locality" property="$.verbatim.locality" />
        <expand macro="param" name="coordinates" property="$.verbatim.coordinates" />
     </inputs>

    <outputs>
        <!-- This isn't going to work - variable names -->
        <data format="json" name="opends" />
    </outputs>

    <tests>
        <test>
            <param name="opends" value="open-ds.json" />
            <output name="opends" file="open-ds.json" ftype="json" lines_diff="2" />
        </test>      
    </tests>

    <help>

        This tool reads a barcode from a specimen object.

    </help>
    <citations>
      
    </citations>
</tool>